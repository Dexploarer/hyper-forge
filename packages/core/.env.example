# =================================
# DATABASE (Railway PostgreSQL)
# =================================

# Get this from Railway Postgres service -> Variables tab -> DATABASE_URL or DATABASE_PUBLIC_URL
DATABASE_URL=postgresql://postgres:password@host:port/railway

# =================================
# AUTHENTICATION
# =================================

# Admin password for simple auth (Landing page login)
# This is a simple shared password for early alpha access
# Must be prefixed with VITE_ to be accessible in browser
VITE_ADMIN_PASSWORD=your_secure_password_here

# Privy credentials (from https://dashboard.privy.io) - Optional for advanced auth
PRIVY_APP_ID=your_privy_app_id
PRIVY_APP_SECRET=your_privy_app_secret

# Frontend Privy App ID (must be prefixed with VITE_ to be accessible in browser)
# Should be the same as PRIVY_APP_ID above
VITE_PRIVY_APP_ID=your_privy_app_id

# =================================
# AI SERVICES
# =================================

# Meshy AI (for 3D generation) - https://www.meshy.ai
MESHY_API_KEY=your_meshy_api_key

# Vercel AI Gateway (recommended for production)
# Get your API key from: https://vercel.com/account/tokens
# Supports unified access to OpenAI and other providers
# - Text generation (chat): openai/gpt-4o, openai/gpt-4o-mini
# - Image generation: google/gemini-2.5-flash-image (CURRENTLY USED - fast and cost-effective)
# - Gateway endpoints:
#   - Chat: https://ai-gateway.vercel.sh/v1/chat/completions
#   - Images: Uses chat completions with image-capable models
AI_GATEWAY_API_KEY=your_vercel_api_key_here

# Direct OpenAI API (alternative to AI Gateway)
# Get your API key from: https://platform.openai.com
# Used for gpt-image-1 when AI_GATEWAY_API_KEY is not set
OPENAI_API_KEY=your_openai_api_key

# =================================
# SERVER CONFIGURATION
# =================================

# API server port
API_PORT=3004

# Environment
NODE_ENV=development

# Frontend URL (for CORS)
# Development: Use your Vite dev server URL (e.g., http://127.0.0.1:3000)
# Production: Use your Railway app URL (e.g., https://asset-forge.up.railway.app)
FRONTEND_URL=

# Image server URL (for Meshy AI callbacks)
# REQUIRED: Must be publicly accessible for Meshy to send generation results
# Development: Use ngrok or similar tunnel (e.g., https://abc123.ngrok.io)
# Production: Use your Railway app URL (e.g., https://asset-forge.up.railway.app)
IMAGE_SERVER_URL=

# Assets directory (DEPRECATED - DO NOT USE)
# CDN-first architecture: All assets are stored on CDN, not locally
# This variable is kept for backward compatibility ONLY
# New deployments should leave this empty
ASSETS_DIR=

# =================================
# CDN CONFIGURATION (REQUIRED IN PRODUCTION)
# =================================

# CDN URL - Production Railway CDN (REQUIRED)
# All assets are uploaded directly to CDN during generation
# Development: Use your local CDN server URL (e.g., http://127.0.0.1:3005)
# Production: Use your Railway CDN URL (e.g., https://cdn-production-4e4b.up.railway.app)
CDN_URL=

# CDN API key for uploading files (REQUIRED IN PRODUCTION)
# Must match CDN service's CDN_API_KEY
CDN_API_KEY=

# CDN WebSocket URL for real-time events (OPTIONAL)
# Enables real-time asset upload notifications via WebSocket
# Development: ws://127.0.0.1:3005/ws/events
# Production: wss://cdn-production-4e4b.up.railway.app/ws/events
# NOTE: Requires CDN_API_KEY to authenticate
CDN_WS_URL=

# =================================
# WEBHOOK CONFIGURATION (CDN Integration - DEPRECATED)
# =================================

# NOTE: WebSocket integration is now the recommended approach for real-time CDN events
# Webhook-based integration is still supported but may be removed in future versions

# CDN fires webhooks to create database records after uploads

# Enable webhook receiver (OPTIONAL - prefer WebSocket)
CDN_WEBHOOK_ENABLED=false

# Shared secret for webhook authentication (REQUIRED if webhooks enabled)
# Must match CDN service's WEBHOOK_SECRET
# Generate with: openssl rand -hex 32
WEBHOOK_SECRET=

# System user ID for CDN-uploaded assets (optional)
WEBHOOK_SYSTEM_USER_ID=00000000-0000-0000-0000-000000000000

# =================================
# ASSET EXPORT
# =================================

# Path to your local clone of https://github.com/HyperscapeAI/assets
ASSETS_REPO_PATH=/path/to/assets-repo

# =================================
# OPTIONAL: ELEVENLABS (Voice Generation)
# =================================

# ElevenLabs API (if using voice features)
# ELEVENLABS_API_KEY=your_elevenlabs_api_key

# =================================
# VECTOR SEARCH (Qdrant)
# =================================

# Qdrant vector database for semantic search
# Get these from your Railway Qdrant service
QDRANT_URL=https://your-qdrant-instance.railway.app
QDRANT_API_KEY=your_qdrant_api_key

# =================================
# REDIS (Job Queue)
# =================================

# Redis connection URL for job queue
# Get this from Railway Redis service
# Format: redis://[username]:[password]@[host]:[port]
# Development: redis://127.0.0.1:6379
# Production: Get from Railway Redis service variables
REDIS_URL=

# Worker configuration
# Number of concurrent workers processing jobs
WORKER_CONCURRENCY=3

# Maximum retry attempts for failed jobs
MAX_JOB_RETRIES=3

# Queue poll timeout in seconds (how long workers wait for new jobs)
QUEUE_POLL_TIMEOUT=5
